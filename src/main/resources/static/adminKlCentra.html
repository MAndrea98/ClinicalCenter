<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
    <!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->
    <title>Administrator of the clinic center</title>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

	<!-- Website CSS style -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="adminKlCentra.css">
	
	<!-- Website Font style -->
    <script src="https://kit.fontawesome.com/a065fea601.js" crossorigin="anonymous"></script>
	<!-- Google Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>
  	<script>
  		function newClinicAdministrator() {
  			let ime = $('#nameClicnicAdmin').val();
  			let prezime = $('#surnameClicnicAdmin').val();
  			let email = $('#emailClicnicAdmin').val();
  			let adresa = $('#addressClicnicAdmin').val();
  			let grad = $('#cityClicnicAdmin').val();
  			let drzava = $('#stateClicnicAdmin').val();
  			let jmbg = $('#jmbgClicnicAdmin').val();
  			let id = $('#idClinic').val() 
  			let url = "/admin_klinickog_centra/novi_admin_klinike/";
  			url += id;

  			$.ajax({
	            url:url,
	            type:"POST",
	            data: JSON.stringify({ime, prezime, email, adresa, grad, drzava, jmbg}),
	            contentType:'application/json',
	            success: function(odgovor) {
	            	$('#nameClicnicAdmin').val('');
	      			$('#surnameClicnicAdmin').val('');
	      			$('#emailClicnicAdmin').val('');
	      			$('#addressClicnicAdmin').val('');
	      			$('#cityClicnicAdmin').val('');
	      			$('#stateClicnicAdmin').val('');
	      			$('#jmbgClicnicAdmin').val('');
	      			$('#idClinic').val('') 
	      			
	            	$('#newAdmin').attr('hidden', true);
	           		$('#adminErrorAlert').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', false);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	    	  		$('#newClinic').attr('hidden', true);
	  				$('#clinicTable').attr('hidden', true);
	            },
	            error: function() {
	            	$('#nameClicnicAdmin').val('');
	      			$('#surnameClicnicAdmin').val('');
	      			$('#emailClicnicAdmin').val('');
	      			$('#addressClicnicAdmin').val('');
	      			$('#cityClicnicAdmin').val('');
	      			$('#stateClicnicAdmin').val('');
	      			$('#jmbgClicnicAdmin').val('');
	      			$('#idClinic').val('') 
	            	$('#adminErrorAlert').attr('hidden', false);
	      			$('#newAdmin').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', true);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	    	  		$('#newClinic').attr('hidden', true);
	  				$('#clinicTable').attr('hidden', true);
	            }
            });
  		}
  		
  		function newAdministrator() {
  			let ime = $('#name').val();
  			let prezime = $('#surname').val();
  			let email = $('#email').val();
  			let adresa = $('#address').val();
  			let grad = $('#city').val();
  			let drzava = $('#state').val();
  			let jmbg = $('#jmbg').val();
  			
  			$.ajax({
	            url:"/admin_klinickog_centra/novi_admin",
	            type:"POST",
	            data: JSON.stringify({ime, prezime, email, adresa, grad, drzava, jmbg}),
	            contentType:'application/json',
	           	success: function(odgovor){
	           		$('#name').val('');
	      			$('#surname').val('');
	      			$('#email').val('');
	      			$('#address').val('');
	      			$('#city').val('');
	      			$('#state').val('');
	      			$('#jmbg').val('');
	           		$('#newAdmin').attr('hidden', true);
	           		$('#adminErrorAlert').attr('hidden', true);
	           		$('#newClinic').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', false);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	    	  		$('#clinicTable').attr('hidden', true);
 	           	},
	           	error: function() {
	           		$('#name').val('');
	      			$('#surname').val('');
	      			$('#email').val('');
	      			$('#address').val('');
	      			$('#city').val('');
	      			$('#state').val('');
	      			$('#jmbg').val('');
	           		$('#adminErrorAlert').attr('hidden', false);
	           		$('#newAdmin').attr('hidden', true);
	    	  		$('#newClinic').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', true);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	    	  		$('#clinicTable').attr('hidden', true);
	           	}
         	});
  		}
  		
  		function newClinicAdmin(klinika) {
  			return function() {
  				$('#newClinicAdmin').attr('hidden', false);
  				$('#clinicTable').attr('hidden', true);
            	$('#newAdmin').attr('hidden', true);
    	  		$('#newClinic').attr('hidden', true);
    	  		$('#adminSuccessAlert').attr('hidden', true);
    	  		$('#adminErrorAlert').attr('hidden', true);
    	  		$('#idClinic').val(klinika.id);
  			}
  		}
  		
  		function prikaziKliniku(klinika) {
  			let tr = $('<tr></tr>');
  			let tdName = $('<td>'+klinika.ime+'</td>');
  			let tdAddress = $('<td>'+klinika.adresa+'</td>');
  			let tdDescribe = $('<td>'+klinika.opis+'</td>');
  			let tdAdmins = $('<td>'+klinika.administratoriKlinike.length+'</td>');
  			let tdAddAdmin = $('<td><a href="#'+klinika.ime+'_newAdministrator">Add administrator</a></td>');
  			tdAddAdmin.click(newClinicAdmin(klinika));
  			tr.append(tdName).append(tdAddress).append(tdDescribe).append(tdAdmins).append(tdAddAdmin);
  			$('#clinicTable tbody').append(tr);
  		}
  		
  		function newClinicAndAdmin() {
	  		let ime = $('#clinicName').val();
	  		let adresa = $('#clinicAddress').val();
	  		let opis = $('#clinicDescribe').val();
	  		
	  		$.ajax({
	            url:"/admin_klinickog_centra/nova_klinika",
	            type:"POST",
	            data: JSON.stringify({ime, adresa, opis}),
	            contentType:'application/json',
	            success: function(klinike) {
	            	$('#clinicTable tbody').html('');
	            	for(let klinika of klinike) {
	            		prikaziKliniku(klinika);
	            	}
	            	$('#clinicName').val('');
	    	  		$('#clinicAddress').val('');
	    	  		$('#clinicDescribe').val('');
	            	$('#clinicTable').attr('hidden', false);
	            	$('#newAdmin').attr('hidden', true);
	    	  		$('#newClinic').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', true);
	    	  		$('#adminErrorAlert').attr('hidden', true);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	            },
	            error: function() {
	            	$('#clinicName').val('');
	    	  		$('#clinicAddress').val('');
	    	  		$('#clinicDescribe').val('');
	            	alert('Desila se greska');
	            }
            });
	  	}
	  	function newAdmin() {
	  		$('#newAdmin').attr('hidden', false);
	  		$('#newClinic').attr('hidden', true);
	  		$('#adminSuccessAlert').attr('hidden', true);
	  		$('#adminErrorAlert').attr('hidden', true);
	  		$('#clinicTable').attr('hidden', true);
	  		$('#newClinicAdmin').attr('hidden', true);
	    }
	  	function newClinic() {
	  		$('#newClinic').attr('hidden', false);
	  		$('#newAdmin').attr('hidden', true);
	  		$('#adminSuccessAlert').attr('hidden', true);
	  		$('#adminErrorAlert').attr('hidden', true);
	  		$('#clinicTable').attr('hidden', true);
	  		$('#newClinicAdmin').attr('hidden', true);
	  	}
	  	function home() {
	  		$('#newClinic').attr('hidden', true);
	  		$('#newAdmin').attr('hidden', true);
	  		$('#adminSuccessAlert').attr('hidden', true);
	  		$('#adminErrorAlert').attr('hidden', true);
	  		$('#clinicTable').attr('hidden', true);
	  		$('#newClinicAdmin').attr('hidden', true);
	  	}
	  	
	  	function allClinics() {
	  		$('#newClinic').attr('hidden', true);
	  		$('#newAdmin').attr('hidden', true);
	  		$('#adminSuccessAlert').attr('hidden', true);
	  		$('#adminErrorAlert').attr('hidden', true);
	  		$('#clinicTable').attr('hidden', true);
	  		$('#newClinicAdmin').attr('hidden', true);
	  		$.ajax({
	            url:"/admin_klinickog_centra/sve_klinike",
	            type:"GET",
	           	success: function(klinike){
	           		$('#clinicTable tbody').html('');
	            	for(let klinika of klinike) {
	            		prikaziKliniku(klinika);
	            	}
	            	$('#clinicTable').attr('hidden', false);
 	           	},
	           	error: function() {
	           		$('#adminErrorAlert').attr('hidden', false);
	           		$('#newAdmin').attr('hidden', true);
	    	  		$('#newClinic').attr('hidden', true);
	    	  		$('#adminSuccessAlert').attr('hidden', true);
	    	  		$('#newClinicAdmin').attr('hidden', true);
	    	  		$('#clinicTable').attr('hidden', true);
	           	}
         	});
	  	}
	  	
  	</script>
  	
</head>
<body>
	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <a class="navbar-brand">Clinical centre</a>
	    </div>
	    <ul class="nav navbar-nav">
	      <li><a onclick="return home();">Home</a></li>
	      <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Add <span class="caret"></span></a>
	        <ul class="dropdown-menu">
	          <li><a onclick="return newAdmin();">New administrator of clinical centre</a></li>
	          <li><a onclick="return newClinic();">New clinic and its administrator</a></li>
	          <li><a href="#">New diagnose</a></li>
	          <li><a href="#">New drug</a></li>
	        </ul>
	      </li>
	      <li><a href="#">Registration requests</a></li>
	      <li><a onclick="return allClinics();">All clinics</a></li>
	      <li><a href="#">Personal data</a></li>
	    </ul>
	    <ul class="nav navbar-nav navbar-right">
	      <li><a href="#"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
	    </ul>
	  </div>
	</nav>
  
	<div class="container">
		<form class="" method="post" action="#" id="newAdmin" hidden="true">
			<div class="form-group">
				<label for="name" class="cols-sm-2 control-label">Name</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Name"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="name" class="cols-sm-2 control-label">Surname</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="surname" id="surname"  placeholder="Enter Surname"/>
					</div>
				</div>
			</div>
	
			<div class="form-group">
				<label for="email" class="cols-sm-2 control-label">Email</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-envelope fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="email" id="email"  placeholder="Enter Email"/>
					</div>
				</div>
			</div>
	
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Address</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="address" id="address"  placeholder="Enter Address"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">City</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-building" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="city" id="city"  placeholder="Enter City"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">State</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-flag" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="state" id="state"  placeholder="Enter State"/>
					</div>
				</div>
			</div>
			
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Unique Identification Number</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-id-card-o" aria-hidden="true"></i></span>
						<input type="number" class="form-control" name="id" id="jmbg"  placeholder="Enter Unique Identification Number"/>
					</div>
				</div>
			</div>
	
			<div class="form-group ">
				<a target="_blank" type="button" id="newAdminButton" class="btn btn-primary btn-lg btn-block login-button" onclick="newAdministrator()">Register new adminitrator</a>
			</div>
		</form>
		
		<form class="" method="post" action="#" id="newClinic" hidden="true">
			<div class="form-group">
				<label for="name" class="cols-sm-2 control-label">Name of clinic</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="name" id="clinicName"  placeholder="Enter the Name of Clinic"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Address of clinic</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="address" id="clinicAddress"  placeholder="Enter the Address of Clinic"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Describe of Clinic</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<textarea class="form-control" rows="5" cols="50" id="clinicDescribe"></textarea>
					</div>
				</div>
			</div>
			
			<div class="form-group ">
				<a target="_blank" type="button" id="newClinicButton" class="btn btn-primary btn-lg btn-block login-button" onclick="newClinicAndAdmin()">Register new clinic</a>
			</div>
			
		</form>
		
		<table class="table" id="clinicTable" hidden="true">
		  <thead>
		    <tr>
		      <th scope="col">Name</th>
		      <th scope="col">Address</th>
		      <th scope="col">Describe</th>
		      <th scope="col">Num of Administrators</th>
		    </tr>
		  </thead>
		  <tbody>
		    
		  </tbody>
		</table>
		
		<form class="" method="post" action="#" id="newClinicAdmin" hidden="true">
			<div class="form-group">
				<label for="name" class="cols-sm-2 control-label">Name</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="name" id="nameClicnicAdmin"  placeholder="Enter Name"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="name" class="cols-sm-2 control-label">Surname</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="surname" id="surnameClicnicAdmin"  placeholder="Enter Surname"/>
					</div>
				</div>
			</div>
	
			<div class="form-group">
				<label for="email" class="cols-sm-2 control-label">Email</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-envelope fa" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="email" id="emailClicnicAdmin"  placeholder="Enter Email"/>
					</div>
				</div>
			</div>
	
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Address</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="address" id="addressClicnicAdmin"  placeholder="Enter Address"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">City</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-building" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="city" id="cityClicnicAdmin"  placeholder="Enter City"/>
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">State</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-flag" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="state" id="stateClicnicAdmin"  placeholder="Enter State"/>
					</div>
				</div>
			</div>
			
			
			<div class="form-group">
				<label for="username" class="cols-sm-2 control-label">Unique Identification Number</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-id-card-o" aria-hidden="true"></i></span>
						<input type="number" class="form-control" name="id" id="jmbgClicnicAdmin"  placeholder="Enter Unique Identification Number"/>
					</div>
				</div>
			</div>
			
			<div class="form-group" hidden="true">
				<label for="username" class="cols-sm-2 control-label">Id</label>
				<div class="cols-sm-10">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-flag" aria-hidden="true"></i></span>
						<input type="text" class="form-control" name="state" id="idClinic"  placeholder="Enter State"/>
					</div>
				</div>
			</div>
	
			<div class="form-group ">
				<a target="_blank" type="button" id="newClinicAdminButton" class="btn btn-primary btn-lg btn-block login-button" onclick="newClinicAdministrator()">Register new clinic adminitrator</a>
			</div>
		</form>
		
		
		<form id="adminSuccessAlert" hidden="true">
			<div class="alert alert-info" role="alert">
			  The new administrator is successfully added.
			</div>
		</form>
		
		<form id="adminErrorAlert" hidden="true">
			<div class="alert alert-danger" role="alert">
			  Something went wrong!!!
			</div>
		</form>
	</div>

</body>
</html>