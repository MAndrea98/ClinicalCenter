<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Profil osoblja</title>

    <!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<!-- Website CSS style -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="doktor.css">
	
	<!-- Website Font style -->
    <script src="https://kit.fontawesome.com/a065fea601.js" crossorigin="anonymous"></script>
	<!-- Google Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>

	<script>
		$(document).ready(()=>{
			document.getElementById('btnSaveData').addEventListener('click', saveData, false);
			
			let k;
			var d = retData();
			d.success(function(korisnik){
				
				k = korisnik;
				$('#uName').val(k.ime);
				$('#uSurname').val(k.prezime);
				$('#uEmail').val(k.email);
				$('#uPassword').val(k.password);
				$('#uCity').val(k.grad);
				$('#uCountry').val(k.drzava);
				$('#uAddress').val(k.adresa);
				$('#uPhone').val(k.telefon);
			})
			
			
			
		})
		
		function retData(){
			id = 1;
			return $.ajax({
				url:'korisnik/podaci/' + id,
				type: 'GET'
			});
		}
		
		
		function saveData(){
			let id = 1;
			let ime = $('#uName').val();
			let prezime = $('#uSurname').val();
			let password = $('#uPassword').val();
			let email = $('#uEmail').val();
			let grad = $('#uCity').val();
			let drzava = $('#uCountry').val();
			let adresa = $('#uAddress').val();
			let telefon = $('#uPhone').val();
			$.ajax({
				url: 'korisnik/izmena_podataka/' + id,
				type: 'PUT',
				data: JSON.stringify({ime, prezime, password, grad, drzava, adresa, telefon, email}),
				contentType: 'application/json',
				success: function(){
					alert('Data successfully changed');
				},
				error: function(){
					alert('Something went wrong');
				}
			})
		}
	</script>
</head>
<h3>Change your data</h3>
<form id = "editForm">
<div class="form-row">
	<div class="form-group col-md-12">
		<label for="name">Name:</label>
		<input type="text" class="form-control" id="uName" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="surname">Surname:</label>
		<input type="text" class="form-control" id="uSurname" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="email">Email:</label>
		<input type="text" class="form-control" id="uEmail" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="password">Password:</label>
		<input type="password" class="form-control" id="uPassword" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="name">City:</label>
		<input type="text" class="form-control" id="uCity" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="country">Country:</label>
		<input type="text" class="form-control" id="uCountry" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="address">Address:</label>
		<input type="text" class="form-control" id="uAddress" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-12">
		<label for="phone">Phone:</label>
		<input type="text" class="form-control" id="uPhone" >
	</div>
</div>

<div class="form-row">
	<div class="form-group col-md-1">
		<a class="btn btn-primary" id = "btnSaveData">Save new data</a>
	</div>
</div>
</form>
</body>
</html>